[gd_scene load_steps=23 format=3 uid="uid://dhcob4yxs8ewv"]

[ext_resource type="Script" path="res://Monsters/Monster.gd" id="1_1ypth"]
[ext_resource type="Texture2D" uid="uid://dikobq33tc1r0" path="res://TileSheet/TransparentSheet.png" id="1_oc5j4"]
[ext_resource type="Script" path="res://ai/tasks/choose_random_position.gd" id="3_hl3g1"]
[ext_resource type="Script" path="res://ai/tasks/move_to_position.gd" id="4_pkmug"]
[ext_resource type="Script" path="res://Player/SoundQueue.gd" id="5_myrxx"]
[ext_resource type="AudioStream" uid="uid://dktud6ul2t62m" path="res://SFX/Player/Summon_GhostFolder.wav" id="6_k1rvq"]
[ext_resource type="AudioStream" uid="uid://cqws8wu8iyy15" path="res://SFX/Player/Zombie_Attack_GhostFolder.wav" id="7_a2s68"]

[sub_resource type="CircleShape2D" id="CircleShape2D_02gba"]
radius = 4.0

[sub_resource type="BlackboardPlan" id="BlackboardPlan_2gjwv"]

[sub_resource type="BTAction" id="BTAction_ulplc"]
script = ExtResource("3_hl3g1")
dir_var = &"dir"

[sub_resource type="BTAction" id="BTAction_py12l"]
script = ExtResource("4_pkmug")
dir_var = &"dir"

[sub_resource type="BTWait" id="BTWait_2wbv8"]

[sub_resource type="BTSequence" id="BTSequence_uhcf1"]
custom_name = "Find Target"
children = [SubResource("BTAction_ulplc"), SubResource("BTAction_py12l"), SubResource("BTWait_2wbv8")]

[sub_resource type="BTSelector" id="BTSelector_recj6"]
children = [SubResource("BTSequence_uhcf1")]

[sub_resource type="BehaviorTree" id="BehaviorTree_6f45p"]
blackboard_plan = SubResource("BlackboardPlan_2gjwv")
root_task = SubResource("BTSelector_recj6")

[sub_resource type="BlackboardPlan" id="BlackboardPlan_tedrw"]

[sub_resource type="Animation" id="Animation_t0175"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0.6, 0.6)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_pxr2n"]
resource_name = "move"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [-0.387033, 0.522241]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.7),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1, 1.19577), Vector2(1, 1.0036)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:modulate")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_skgv2"]
resource_name = "spawn"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:scale")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector2(1e-05, 1e-05), Vector2(0.6, 0.6)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath(".:modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(0.705882, 0, 0.709804, 1), Color(0.152941, 0.6, 0.854902, 1), Color(0.705882, 0, 0.709804, 1), Color(0.152941, 0.6, 0.854902, 1), Color(1, 1, 1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".:rotation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 6.28319]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nurqs"]
_data = {
"RESET": SubResource("Animation_t0175"),
"move": SubResource("Animation_pxr2n"),
"spawn": SubResource("Animation_skgv2")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_pkt5b"]
radius = 78.3333

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cb8uo"]
size = Vector2(13.3333, 13.3333)

[node name="Zombie" type="CharacterBody2D"]
modulate = Color(1, 1, 1, 0)
z_index = 3
scale = Vector2(0.6, 0.6)
collision_layer = 2
collision_mask = 5
script = ExtResource("1_1ypth")
DAMAGE = 5

[node name="Sprite2D" type="Sprite2D" parent="."]
rotation = -0.387033
scale = Vector2(1, 1.19577)
texture = ExtResource("1_oc5j4")
region_enabled = true
region_rect = Rect2(99, 1, 8, 8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
shape = SubResource("CircleShape2D_02gba")

[node name="BTPlayer" type="BTPlayer" parent="."]
behavior_tree = SubResource("BehaviorTree_6f45p")
blackboard_plan = SubResource("BlackboardPlan_tedrw")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_nurqs")
}
speed_scale = 2.0

[node name="Detection" type="Area2D" parent="."]
visible = false
collision_layer = 0
collision_mask = 4

[node name="Detection_shape" type="CollisionShape2D" parent="Detection"]
shape = SubResource("CircleShape2D_pkt5b")

[node name="Hitbox" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 4

[node name="hitboxShape" type="CollisionShape2D" parent="Hitbox"]
position = Vector2(-1.98682e-07, -2.45046e-07)
shape = SubResource("RectangleShape2D_cb8uo")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
avoidance_enabled = true

[node name="Death_timer" type="Timer" parent="."]
wait_time = 4.0
one_shot = true

[node name="Hit_Timer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.3
autostart = true

[node name="SoundQueue" type="Node" parent="."]
script = ExtResource("5_myrxx")

[node name="summon" type="AudioStreamPlayer2D" parent="SoundQueue"]
scale = Vector2(0.8, 0.8)
stream = ExtResource("6_k1rvq")
pitch_scale = 3.36
bus = &"Shadow"

[node name="attack" type="AudioStreamPlayer2D" parent="SoundQueue"]
scale = Vector2(0.8, 0.8)
stream = ExtResource("7_a2s68")
pitch_scale = 1.32
bus = &"Shadow"

[connection signal="body_entered" from="Detection" to="." method="_on_detection_body_entered"]
[connection signal="timeout" from="Death_timer" to="." method="_on_death_timer_timeout"]
[connection signal="timeout" from="Hit_Timer" to="." method="_on_hit_timer_timeout"]
